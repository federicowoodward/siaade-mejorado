<div class="code-card">
  <div class="text-center mb-4">
    <i class="pi pi-envelope text-6xl text-primary mb-3"></i>
    <h2 class="mb-2">Verificá tu código</h2>
    <p class="text-color-secondary">
      Ingresá el código de 6 dígitos que enviamos a:
    </p>
    <div class="font-semibold mt-2">{{ userEmail() }}</div>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="flex flex-column gap-4">
    <div class="flex flex-column gap-2">
      <label for="code" class="font-semibold">Código de verificación</label>
      <input
        pInputText
        id="code"
        formControlName="code"
        placeholder="123456"
        maxlength="6"
        class="text-center text-2xl"
        [style]="{ 'letter-spacing': '0.5em', 'font-family': 'monospace' }"
      />
      <small class="text-color-secondary">Ingresá los 6 dígitos</small>
    </div>

    <p-button
      type="submit"
      label="Verificar"
      icon="pi pi-check"
      [loading]="submitting()"
      [disabled]="form.invalid || submitting()"
      styleClass="w-full"
    ></p-button>

    <div class="text-center">
      <p-button
        *ngIf="!canResend"
        [label]="'Reenviar código en ' + resendIn + 's'"
        [text]="true"
        [disabled]="true"
        styleClass="w-full"
      ></p-button>
      <p-button
        *ngIf="canResend"
        label="Reenviar código"
        icon="pi pi-refresh"
        [text]="true"
        (onClick)="resendCode()"
        styleClass="w-full"
      ></p-button>
    </div>

    <p-button
      label="Cancelar"
      icon="pi pi-times"
      [outlined]="true"
      (onClick)="cancel()"
      styleClass="w-full"
      severity="secondary"
    ></p-button>
  </form>
</div>

<p-toast></p-toast>
