<div class="notices-page">
    <h2 class="page-title">
    <i class="pi pi-bell text-primary mr-2"></i>
    Avisos (Administración)
    </h2>

    <!-- Form de creación -->
    <div class="new-notice-form">
    <input
    type="text"
    placeholder="Título"
    [(ngModel)]="newNotice.title"
    class="p-inputtext"
    />

    <p-editor
    [(ngModel)]="newNotice.content"
    [style]="{height: '200px'}"
    placeholder="Escribí el contenido del aviso…"
    ></p-editor>

    <label for="visibleFor">Visible para:</label>
    <select [(ngModel)]="newNotice.visibleFor" id="visibleFor">
    <option value="alumno">Alumnos</option>
    <option value="profesor">Profesores</option>
</select>

    <button pButton type="button" label="Publicar" (click)="addNotice()" class="mt-2"></button>     
    </div>

<!-- Lista de avisos (admin ve todos) -->
<ul class="notices-list">
    <li *ngFor="let n of notices()">
    <div class="notice-item">
        <h3>{{ n.title }}</h3>
        <div class="content" [innerHTML]="n.content"></div>
        <small class="meta">
        Destinatarios: {{ n.visibleFor === 'student' ? 'Alumnos' : 'Profesores' }} ·
        {{ n.createdBy }} · {{ n.createdAt | date:'short' }}
        </small>

        <button pButton type="button" label="Eliminar" class="p-button-danger mt-2" (click)="deleteNotice(n.id)"></button>
    </div>
    </li>
</ul>
</div>